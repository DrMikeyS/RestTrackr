<ion-header>
  <ion-toolbar>
    <ion-title>
      View Results
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <h2>Results</h2>
  <table *ngIf="results && results.length > 0">
    <thead>
      <tr>
        <th>Variable ID</th>
        <th>Variable Value</th>
        <th>Sleep count</th>
        <th>Poor Sleep</th>
        <th>OK Sleep</th>
        <th>Great Sleep</th>
        <th>variableSleepScore</th>
        <th>relativeSleepScore</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let result of results">
        <tr>
          <td>{{ result.variableID }}</td>
          <td>{{ result.variableValue }}</td>
          <td>{{ result.sleepCount }}</td>
          <td>{{ result.poorSleepPercentage }}</td>
          <td>{{ result.okSleepPercentage }}</td>
          <td>{{ result.greatSleepPercentage }}</td>
          <td>{{ result.variableSleepScore }}</td>
          <td>{{ result.relativeSleepScore }}</td>
        </tr>
      </ng-container>
    </tbody>
  </table>
  <div *ngIf="!results || results.length === 0">
    No results found.
  </div>


  <h2>Results</h2>
  <div class="bar-chart" *ngIf="results && results.length > 0">
    <div class="bar" *ngFor="let result of results" [style.width.%]="calculateBarWidth(result.relativeSleepScore)">
      <!-- Display the variable ID as the label on each bar -->
      <div class="bar-label">{{ result.variableID }}</div>
    </div>
  </div>
  <canvas #canvas></canvas>

</ion-content>